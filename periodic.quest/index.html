<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Periodic Quest: Student Edition</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Custom scrollbar for better UX on the table container */
        .custom-scrollbar::-webkit-scrollbar {
            height: 8px;
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* Animation keyframes */
        @keyframes bounce-in {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-bounce-in {
            animation: bounce-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Icons (Inline SVGs) ---
        const Icons = {
            Beaker: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4.5 3h15"/><path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3"/><path d="M6 14h12"/></svg>
            ),
            RotateCcw: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
            ),
            CheckCircle2: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
            ),
            XCircle: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>
            ),
            Trophy: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
            )
        };

        // --- Data ---
        const rawElements = [
            // Period 1
            { n: 1, s: 'H', name: 'Hydrogen', cat: 'nonmetal', g: 1, p: 1 },
            { n: 2, s: 'He', name: 'Helium', cat: 'noble', g: 18, p: 1 },
            // Period 2
            { n: 3, s: 'Li', name: 'Lithium', cat: 'alkali', g: 1, p: 2 },
            { n: 4, s: 'Be', name: 'Beryllium', cat: 'alkaline', g: 2, p: 2 },
            { n: 5, s: 'B', name: 'Boron', cat: 'metalloid', g: 13, p: 2 },
            { n: 6, s: 'C', name: 'Carbon', cat: 'nonmetal', g: 14, p: 2 },
            { n: 7, s: 'N', name: 'Nitrogen', cat: 'nonmetal', g: 15, p: 2 },
            { n: 8, s: 'O', name: 'Oxygen', cat: 'nonmetal', g: 16, p: 2 },
            { n: 9, s: 'F', name: 'Fluorine', cat: 'halogen', g: 17, p: 2 },
            { n: 10, s: 'Ne', name: 'Neon', cat: 'noble', g: 18, p: 2 },
            // Period 3
            { n: 11, s: 'Na', name: 'Sodium', cat: 'alkali', g: 1, p: 3 },
            { n: 12, s: 'Mg', name: 'Magnesium', cat: 'alkaline', g: 2, p: 3 },
            { n: 13, s: 'Al', name: 'Aluminium', cat: 'post-transition', g: 13, p: 3 },
            { n: 14, s: 'Si', name: 'Silicon', cat: 'metalloid', g: 14, p: 3 },
            { n: 15, s: 'P', name: 'Phosphorus', cat: 'nonmetal', g: 15, p: 3 },
            { n: 16, s: 'S', name: 'Sulfur', cat: 'nonmetal', g: 16, p: 3 },
            { n: 17, s: 'Cl', name: 'Chlorine', cat: 'halogen', g: 17, p: 3 },
            { n: 18, s: 'Ar', name: 'Argon', cat: 'noble', g: 18, p: 3 },
            // Period 4
            { n: 19, s: 'K', name: 'Potassium', cat: 'alkali', g: 1, p: 4 },
            { n: 20, s: 'Ca', name: 'Calcium', cat: 'alkaline', g: 2, p: 4 },
            { n: 21, s: 'Sc', name: 'Scandium', cat: 'transition', g: 3, p: 4 },
            { n: 22, s: 'Ti', name: 'Titanium', cat: 'transition', g: 4, p: 4 },
            { n: 23, s: 'V', name: 'Vanadium', cat: 'transition', g: 5, p: 4 },
            { n: 24, s: 'Cr', name: 'Chromium', cat: 'transition', g: 6, p: 4 },
            { n: 25, s: 'Mn', name: 'Manganese', cat: 'transition', g: 7, p: 4 },
            { n: 26, s: 'Fe', name: 'Iron', cat: 'transition', g: 8, p: 4 },
            { n: 27, s: 'Co', name: 'Cobalt', cat: 'transition', g: 9, p: 4 },
            { n: 28, s: 'Ni', name: 'Nickel', cat: 'transition', g: 10, p: 4 },
            { n: 29, s: 'Cu', name: 'Copper', cat: 'transition', g: 11, p: 4 },
            { n: 30, s: 'Zn', name: 'Zinc', cat: 'transition', g: 12, p: 4 },
            { n: 31, s: 'Ga', name: 'Gallium', cat: 'post-transition', g: 13, p: 4 },
            { n: 32, s: 'Ge', name: 'Germanium', cat: 'metalloid', g: 14, p: 4 },
            { n: 33, s: 'As', name: 'Arsenic', cat: 'metalloid', g: 15, p: 4 },
            { n: 34, s: 'Se', name: 'Selenium', cat: 'nonmetal', g: 16, p: 4 },
            { n: 35, s: 'Br', name: 'Bromine', cat: 'halogen', g: 17, p: 4 },
            { n: 36, s: 'Kr', name: 'Krypton', cat: 'noble', g: 18, p: 4 },
            // Period 5
            { n: 37, s: 'Rb', name: 'Rubidium', cat: 'alkali', g: 1, p: 5 },
            { n: 38, s: 'Sr', name: 'Strontium', cat: 'alkaline', g: 2, p: 5 },
            { n: 39, s: 'Y', name: 'Yttrium', cat: 'transition', g: 3, p: 5 },
            { n: 40, s: 'Zr', name: 'Zirconium', cat: 'transition', g: 4, p: 5 },
            { n: 41, s: 'Nb', name: 'Niobium', cat: 'transition', g: 5, p: 5 },
            { n: 42, s: 'Mo', name: 'Molybdenum', cat: 'transition', g: 6, p: 5 },
            { n: 43, s: 'Tc', name: 'Technetium', cat: 'transition', g: 7, p: 5 },
            { n: 44, s: 'Ru', name: 'Ruthenium', cat: 'transition', g: 8, p: 5 },
            { n: 45, s: 'Rh', name: 'Rhodium', cat: 'transition', g: 9, p: 5 },
            { n: 46, s: 'Pd', name: 'Palladium', cat: 'transition', g: 10, p: 5 },
            { n: 47, s: 'Ag', name: 'Silver', cat: 'transition', g: 11, p: 5 },
            { n: 48, s: 'Cd', name: 'Cadmium', cat: 'transition', g: 12, p: 5 },
            { n: 49, s: 'In', name: 'Indium', cat: 'post-transition', g: 13, p: 5 },
            { n: 50, s: 'Sn', name: 'Tin', cat: 'post-transition', g: 14, p: 5 },
            { n: 51, s: 'Sb', name: 'Antimony', cat: 'metalloid', g: 15, p: 5 },
            { n: 52, s: 'Te', name: 'Tellurium', cat: 'metalloid', g: 16, p: 5 },
            { n: 53, s: 'I', name: 'Iodine', cat: 'halogen', g: 17, p: 5 },
            { n: 54, s: 'Xe', name: 'Xenon', cat: 'noble', g: 18, p: 5 },
            // Period 6
            { n: 55, s: 'Cs', name: 'Cesium', cat: 'alkali', g: 1, p: 6 },
            { n: 56, s: 'Ba', name: 'Barium', cat: 'alkaline', g: 2, p: 6 },
            // Lanthanides (57-71) are split below
            { n: 72, s: 'Hf', name: 'Hafnium', cat: 'transition', g: 4, p: 6 },
            { n: 73, s: 'Ta', name: 'Tantalum', cat: 'transition', g: 5, p: 6 },
            { n: 74, s: 'W', name: 'Tungsten', cat: 'transition', g: 6, p: 6 },
            { n: 75, s: 'Re', name: 'Rhenium', cat: 'transition', g: 7, p: 6 },
            { n: 76, s: 'Os', name: 'Osmium', cat: 'transition', g: 8, p: 6 },
            { n: 77, s: 'Ir', name: 'Iridium', cat: 'transition', g: 9, p: 6 },
            { n: 78, s: 'Pt', name: 'Platinum', cat: 'transition', g: 10, p: 6 },
            { n: 79, s: 'Au', name: 'Gold', cat: 'transition', g: 11, p: 6 },
            { n: 80, s: 'Hg', name: 'Mercury', cat: 'transition', g: 12, p: 6 },
            { n: 81, s: 'Tl', name: 'Thallium', cat: 'post-transition', g: 13, p: 6 },
            { n: 82, s: 'Pb', name: 'Lead', cat: 'post-transition', g: 14, p: 6 },
            { n: 83, s: 'Bi', name: 'Bismuth', cat: 'post-transition', g: 15, p: 6 },
            { n: 84, s: 'Po', name: 'Polonium', cat: 'metalloid', g: 16, p: 6 },
            { n: 85, s: 'At', name: 'Astatine', cat: 'halogen', g: 17, p: 6 },
            { n: 86, s: 'Rn', name: 'Radon', cat: 'noble', g: 18, p: 6 },
            // Period 7
            { n: 87, s: 'Fr', name: 'Francium', cat: 'alkali', g: 1, p: 7 },
            { n: 88, s: 'Ra', name: 'Radium', cat: 'alkaline', g: 2, p: 7 },
            { n: 104, s: 'Rf', name: 'Rutherfordium', cat: 'transition', g: 4, p: 7 },
            { n: 105, s: 'Db', name: 'Dubnium', cat: 'transition', g: 5, p: 7 },
            { n: 106, s: 'Sg', name: 'Seaborgium', cat: 'transition', g: 6, p: 7 },
            { n: 107, s: 'Bh', name: 'Bohrium', cat: 'transition', g: 7, p: 7 },
            { n: 108, s: 'Hs', name: 'Hassium', cat: 'transition', g: 8, p: 7 },
            { n: 109, s: 'Mt', name: 'Meitnerium', cat: 'unknown', g: 9, p: 7 },
            { n: 110, s: 'Ds', name: 'Darmstadtium', cat: 'unknown', g: 10, p: 7 },
            { n: 111, s: 'Rg', name: 'Roentgenium', cat: 'unknown', g: 11, p: 7 },
            { n: 112, s: 'Cn', name: 'Copernicium', cat: 'post-transition', g: 12, p: 7 },
            { n: 113, s: 'Nh', name: 'Nihonium', cat: 'unknown', g: 13, p: 7 },
            { n: 114, s: 'Fl', name: 'Flerovium', cat: 'post-transition', g: 14, p: 7 },
            { n: 115, s: 'Mc', name: 'Moscovium', cat: 'unknown', g: 15, p: 7 },
            { n: 116, s: 'Lv', name: 'Livermorium', cat: 'unknown', g: 16, p: 7 },
            { n: 117, s: 'Ts', name: 'Tennessine', cat: 'unknown', g: 17, p: 7 },
            { n: 118, s: 'Og', name: 'Oganesson', cat: 'unknown', g: 18, p: 7 },
            // Lanthanides
            { n: 57, s: 'La', name: 'Lanthanum', cat: 'lanthanide', g: 4, p: 9 },
            { n: 58, s: 'Ce', name: 'Cerium', cat: 'lanthanide', g: 5, p: 9 },
            { n: 59, s: 'Pr', name: 'Praseodymium', cat: 'lanthanide', g: 6, p: 9 },
            { n: 60, s: 'Nd', name: 'Neodymium', cat: 'lanthanide', g: 7, p: 9 },
            { n: 61, s: 'Pm', name: 'Promethium', cat: 'lanthanide', g: 8, p: 9 },
            { n: 62, s: 'Sm', name: 'Samarium', cat: 'lanthanide', g: 9, p: 9 },
            { n: 63, s: 'Eu', name: 'Europium', cat: 'lanthanide', g: 10, p: 9 },
            { n: 64, s: 'Gd', name: 'Gadolinium', cat: 'lanthanide', g: 11, p: 9 },
            { n: 65, s: 'Tb', name: 'Terbium', cat: 'lanthanide', g: 12, p: 9 },
            { n: 66, s: 'Dy', name: 'Dysprosium', cat: 'lanthanide', g: 13, p: 9 },
            { n: 67, s: 'Ho', name: 'Holmium', cat: 'lanthanide', g: 14, p: 9 },
            { n: 68, s: 'Er', name: 'Erbium', cat: 'lanthanide', g: 15, p: 9 },
            { n: 69, s: 'Tm', name: 'Thulium', cat: 'lanthanide', g: 16, p: 9 },
            { n: 70, s: 'Yb', name: 'Ytterbium', cat: 'lanthanide', g: 17, p: 9 },
            { n: 71, s: 'Lu', name: 'Lutetium', cat: 'lanthanide', g: 18, p: 9 },
            // Actinides
            { n: 89, s: 'Ac', name: 'Actinium', cat: 'actinide', g: 4, p: 10 },
            { n: 90, s: 'Th', name: 'Thorium', cat: 'actinide', g: 5, p: 10 },
            { n: 91, s: 'Pa', name: 'Protactinium', cat: 'actinide', g: 6, p: 10 },
            { n: 92, s: 'U', name: 'Uranium', cat: 'actinide', g: 7, p: 10 },
            { n: 93, s: 'Np', name: 'Neptunium', cat: 'actinide', g: 8, p: 10 },
            { n: 94, s: 'Pu', name: 'Plutonium', cat: 'actinide', g: 9, p: 10 },
            { n: 95, s: 'Am', name: 'Americium', cat: 'actinide', g: 10, p: 10 },
            { n: 96, s: 'Cm', name: 'Curium', cat: 'actinide', g: 11, p: 10 },
            { n: 97, s: 'Bk', name: 'Berkelium', cat: 'actinide', g: 12, p: 10 },
            { n: 98, s: 'Cf', name: 'Californium', cat: 'actinide', g: 13, p: 10 },
            { n: 99, s: 'Es', name: 'Einsteinium', cat: 'actinide', g: 14, p: 10 },
            { n: 100, s: 'Fm', name: 'Fermium', cat: 'actinide', g: 15, p: 10 },
            { n: 101, s: 'Md', name: 'Mendelevium', cat: 'actinide', g: 16, p: 10 },
            { n: 102, s: 'No', name: 'Nobelium', cat: 'actinide', g: 17, p: 10 },
            { n: 103, s: 'Lr', name: 'Lawrencium', cat: 'actinide', g: 18, p: 10 },
        ];

        const categoryColors = {
            'nonmetal': 'bg-blue-200 text-blue-900 border-blue-300 hover:bg-blue-300',
            'noble': 'bg-purple-200 text-purple-900 border-purple-300 hover:bg-purple-300',
            'alkali': 'bg-red-200 text-red-900 border-red-300 hover:bg-red-300',
            'alkaline': 'bg-orange-200 text-orange-900 border-orange-300 hover:bg-orange-300',
            'metalloid': 'bg-teal-200 text-teal-900 border-teal-300 hover:bg-teal-300',
            'halogen': 'bg-yellow-200 text-yellow-900 border-yellow-300 hover:bg-yellow-300',
            'transition': 'bg-indigo-200 text-indigo-900 border-indigo-300 hover:bg-indigo-300',
            'post-transition': 'bg-green-200 text-green-900 border-green-300 hover:bg-green-300',
            'lanthanide': 'bg-pink-200 text-pink-900 border-pink-300 hover:bg-pink-300',
            'actinide': 'bg-rose-300 text-rose-900 border-rose-400 hover:bg-rose-400',
            'unknown': 'bg-gray-200 text-gray-700 border-gray-300 hover:bg-gray-300',
        };

        const ElementTile = ({ element, onClick, status, isFound }) => {
            let gridCol = element.g;
            let gridRow = element.p;

            if (element.p === 9 || element.p === 10) {
                gridCol = element.g;
            }

            const baseStyle = "relative flex flex-col items-center justify-center p-0.5 sm:p-1 text-[0.5rem] sm:text-xs md:text-sm font-bold border rounded cursor-pointer transition-all duration-200 select-none shadow-sm active:scale-95";
            let colorClass = categoryColors[element.cat] || categoryColors['unknown'];
            let animationClass = "";
            let borderClass = "";
            let opacityClass = isFound ? "opacity-25 grayscale cursor-default" : "opacity-100";

            if (status === 'correct') {
                animationClass = "animate-bounce ring-4 ring-green-400 z-10 scale-110";
                borderClass = "border-green-600 bg-green-200";
                opacityClass = "opacity-100"; // Ensure it pops when just found
            } else if (status === 'wrong') {
                animationClass = "animate-pulse ring-4 ring-red-400 z-10";
                borderClass = "border-red-600 bg-red-200";
            }

            return (
                <div
                    className={`${baseStyle} ${colorClass} ${animationClass} ${borderClass} ${opacityClass} h-full w-full`}
                    style={{
                        gridColumn: gridCol,
                        gridRow: gridRow,
                        aspectRatio: '1/1'
                    }}
                    onClick={() => {
                        if (!isFound) onClick(element);
                    }}
                >
                    <span className="absolute top-0 left-0.5 text-[0.4rem] sm:text-[0.6rem] opacity-50 font-normal leading-none mt-0.5">
                        {element.n}
                    </span>
                    <span className="text-sm sm:text-base md:text-lg font-extrabold">{element.s}</span>
                    <span className="hidden lg:block text-[0.5rem] font-normal leading-tight overflow-hidden text-ellipsis whitespace-nowrap max-w-full px-0.5">
                        {element.name}
                    </span>
                </div>
            );
        };

        const App = () => {
            const [targetElement, setTargetElement] = useState(null);
            const [score, setScore] = useState(0);
            const [streak, setStreak] = useState(0);
            const [foundElements, setFoundElements] = useState(new Set());
            const [feedback, setFeedback] = useState(null);
            const [showConfetti, setShowConfetti] = useState(false);
            const [gameComplete, setGameComplete] = useState(false);

            // Weighted Groups and Periods
            const highFreqGroups = [1, 2, 13, 14, 15, 16, 17, 18];
            const highFreqPeriods = [1, 2, 3];

            useEffect(() => {
                pickNewTarget(new Set());
            }, []);

            const pickNewTarget = (currentFound) => {
                const foundSet = currentFound || foundElements;
                // Filter out elements already found
                const available = rawElements.filter(el => !foundSet.has(el.n));

                if (available.length === 0) {
                    setGameComplete(true);
                    setTargetElement(null);
                    return;
                }

                // Weighted Selection Logic
                const weightedPool = [];
                
                available.forEach(el => {
                    let weight = 1;
                    const isHighGroup = highFreqGroups.includes(el.g);
                    const isHighPeriod = highFreqPeriods.includes(el.p); // Note: el.p for period

                    // Logic: 
                    // High Priority (Both matches) -> Very High Weight (10)
                    // Medium Priority (One match) -> Medium Weight (3)
                    // Low Priority (No match) -> Low Weight (1)
                    
                    if (isHighPeriod && isHighGroup) {
                         weight = 12; // Most frequent
                    } else if (isHighPeriod || isHighGroup) {
                        weight = 4; // Moderate frequency
                    } else {
                        weight = 1; // Least frequent (e.g., Lanthanides, deep transition metals)
                    }

                    // Add element index to pool 'weight' times
                    for(let i=0; i < weight; i++) {
                        weightedPool.push(el);
                    }
                });

                const randomEl = weightedPool[Math.floor(Math.random() * weightedPool.length)];
                setTargetElement(randomEl);
                setFeedback(null);
            };

            const handleElementClick = (clickedElement) => {
                if (!targetElement) return;

                if (clickedElement.n === targetElement.n) {
                    // Correct!
                    const newStreak = streak + 1;
                    setScore(s => s + 10 + (newStreak * 2));
                    setStreak(newStreak);
                    
                    const newFound = new Set(foundElements);
                    newFound.add(clickedElement.n);
                    setFoundElements(newFound);

                    setFeedback({ 
                        type: 'correct', 
                        message: `Correct! That is ${clickedElement.name}.`, 
                        elementId: clickedElement.n 
                    });
                    
                    if (newStreak % 5 === 0) {
                        setShowConfetti(true);
                        setTimeout(() => setShowConfetti(false), 2000);
                    }

                    setTimeout(() => {
                        pickNewTarget(newFound);
                    }, 1500);
                } else {
                    // Wrong
                    setStreak(0);
                    setFeedback({ 
                        type: 'wrong', 
                        message: `Oops! That was ${clickedElement.name} (${clickedElement.s}).`, 
                        elementId: clickedElement.n 
                    });
                }
            };

            const resetGame = () => {
                setScore(0);
                setStreak(0);
                setFoundElements(new Set());
                setGameComplete(false);
                pickNewTarget(new Set()); // Pass empty set explicitly for immediate restart
            };

            return (
                <div className="min-h-screen p-4 flex flex-col items-center">
                    
                    {/* Header / HUD */}
                    <div className="w-full max-w-6xl bg-white rounded-2xl shadow-lg border border-slate-200 p-4 md:p-6 mb-6 flex flex-col md:flex-row justify-between items-center gap-4 sticky top-2 z-50">
                        
                        <div className="flex items-center gap-4">
                            <div className="bg-indigo-100 p-3 rounded-xl">
                                <div className="text-indigo-600"><Icons.Beaker /></div>
                            </div>
                            <div>
                                <h1 className="text-xl md:text-2xl font-bold text-slate-900">Periodic Quest</h1>
                                <p className="text-sm text-slate-500 hidden sm:block">
                                    {gameComplete ? "Quest Complete!" : `Progress: ${foundElements.size} / ${rawElements.length}`}
                                </p>
                            </div>
                        </div>

                        <div className="flex-1 flex flex-col items-center justify-center text-center">
                            {gameComplete ? (
                                <div className="text-2xl font-bold text-green-600 animate-bounce">
                                    ðŸŽ‰ All Elements Found! ðŸŽ‰
                                </div>
                            ) : (
                                <>
                                    <div className="text-sm uppercase tracking-wider text-slate-400 font-semibold mb-1">Current Target</div>
                                    {targetElement && (
                                        <div className="text-3xl md:text-4xl font-black text-indigo-600 animate-bounce-in">
                                            Find <span className="underline decoration-wavy decoration-indigo-300 underline-offset-4">{targetElement.name}</span>
                                        </div>
                                    )}
                                </>
                            )}
                        </div>

                        <div className="flex items-center gap-6">
                            <div className="text-right">
                                <div className="text-sm text-slate-400 font-semibold uppercase">Score</div>
                                <div className="text-2xl font-bold tabular-nums">{score}</div>
                            </div>
                            <div className="text-right">
                                <div className="text-sm text-slate-400 font-semibold uppercase">Streak</div>
                                <div className={`text-2xl font-bold tabular-nums ${streak > 2 ? 'text-orange-500' : ''}`}>
                                    {streak} <span className="text-base">ðŸ”¥</span>
                                </div>
                            </div>
                            <button 
                                onClick={resetGame}
                                className="p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-400 hover:text-slate-600"
                                title="Reset Game"
                            >
                                <div className="text-slate-600"><Icons.RotateCcw /></div>
                            </button>
                        </div>
                    </div>

                    {/* Feedback Banner (Floating) */}
                    {feedback && (
                        <div className={`fixed bottom-8 left-1/2 -translate-x-1/2 px-6 py-3 rounded-full shadow-xl text-white font-bold text-lg z-[100] flex items-center gap-3 animate-bounce-in ${feedback.type === 'correct' ? 'bg-green-500' : 'bg-red-500'}`}>
                            {feedback.type === 'correct' ? <Icons.CheckCircle2 /> : <Icons.XCircle />}
                            {feedback.message}
                        </div>
                    )}

                    {/* The Periodic Table Grid */}
                    <div className="w-full max-w-7xl overflow-x-auto pb-12 px-2 custom-scrollbar">
                        <div 
                            className="grid gap-1 sm:gap-1.5 min-w-[800px] lg:min-w-full"
                            style={{
                                gridTemplateColumns: 'repeat(18, minmax(0, 1fr))',
                                gridTemplateRows: 'repeat(10, minmax(0, 1fr))',
                            }}
                        >
                            {/* Main Elements */}
                            {rawElements.map((el) => (
                                <ElementTile 
                                    key={el.n} 
                                    element={el} 
                                    onClick={handleElementClick}
                                    status={feedback?.elementId === el.n ? feedback.type : 'neutral'}
                                    isFound={foundElements.has(el.n)}
                                />
                            ))}

                            {/* Placeholders */}
                            <div className="col-start-3 row-start-6 flex items-center justify-center text-xs text-slate-300 font-bold border border-slate-100 rounded bg-slate-50/50 select-none">
                                57-71
                            </div>
                            <div className="col-start-3 row-start-7 flex items-center justify-center text-xs text-slate-300 font-bold border border-slate-100 rounded bg-slate-50/50 select-none">
                                89-103
                            </div>
                        </div>
                    </div>

                    {/* Legend */}
                    <div className="w-full max-w-4xl mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 text-xs text-center opacity-80">
                        {Object.entries({
                            'alkali': 'Alkali Metal',
                            'alkaline': 'Alkaline Earth',
                            'transition': 'Transition Metal',
                            'post-transition': 'Post-Transition',
                            'metalloid': 'Metalloid',
                            'nonmetal': 'Reactive Nonmetal',
                            'noble': 'Noble Gas',
                            'lanthanide': 'Lanthanide',
                            'actinide': 'Actinide',
                            'halogen': 'Halogen'
                        }).map(([key, label]) => (
                            <div key={key} className={`px-2 py-1 rounded border ${categoryColors[key]} bg-opacity-50`}>
                                {label}
                            </div>
                        ))}
                    </div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
